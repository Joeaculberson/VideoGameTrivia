<div class="text-center">
    <%= button_to '+ New Game', new_game_path, :class => 'btn btn-info btn-lg', :method => :get, :style => 'width: 80%' %>
</div>

<br>

<% if @user_turn_games.size > 0 %>
    <div class="panel panel-default">
    <table class="table table-striped table-hover">
      <thead>
      <th>
        Your turn
      </th>
      <th>
        Your pieces
      </th>
      <th>
        Their pieces
      </th>
      <th>
        Round
      </th>
      </thead>

      <tbody>
      <% @user_turn_games.each do |game| %>
          <tr class="success" onclick="location.href='<%= game_path(game) %>'">
            <td>
              <div id="face-wrapper">
                <% if current_user.email == game.user_email %>
                    <% current_opponent = User.find_by email: game.opponent_user_email %>
                <% else %>
                    <% current_opponent = User.find_by email: game.user_email %>
                <% end %>

                <% if current_opponent.image %>
                    <img src='<%= current_opponent.image %>' class="img-circle face">
                <% else %>
                    <img src='<%= image_url('default_profile.png')%>' class="img-circle face">
                <% end %>
                <%= current_opponent.email %>
              </div>
            </td>
            <td>
              <% if current_user.email == game.user_email %>
                  <%= game.user_pieces.split.length %>
              <% else %>
                  <%= game.opponent_pieces.split.length %>
              <% end %>
            </td>
            <td>
              <% if current_user.email == game.user_email %>
                  <%= game.opponent_pieces.split.length %>
              <% else %>
                  <%= game.user_pieces.split.length %>
              <% end %>
            </td>
            <td><%= game.round %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
    </div>
<% end %>

<% if @opponent_turn_games.size > 0 %>
    <div class="panel panel-default">
    <table class="table table-striped">
      <thead>
          <th>
            Their turn
          </th>
          <th>
            Your pieces
          </th>
          <th>
            Their pieces
          </th>
          <th>
            Round
      </th>
      </thead>

      <tbody>
      <% @opponent_turn_games.each do |game| %>
          <tr class="info">
            <td><div id="face-wrapper">
              <% if current_user.email == game.user_email %>
                  <% current_opponent = User.find_by email: game.opponent_user_email %>
              <% else %>
                  <% current_opponent = User.find_by email: game.user_email %>
              <% end %>
              <% if current_opponent.image %>
                  <img src='<%= current_opponent.image %>' class="img-circle face">
              <% else %>
                  <img src='<%= image_url('default_profile.png')%>' class="img-circle face">
              <% end %>
              <%= current_opponent.email %>
            </div>
            </td>
            <td>
              <% if current_user.email == game.user_email %>
                  <%= game.user_pieces.split.length %>
              <% else %>
                  <%= game.opponent_pieces.split.length %>
              <% end %>
            </td>
            <td>
              <% if current_user.email == game.user_email %>
                  <%= game.opponent_pieces.split.length %>
              <% else %>
                  <%= game.user_pieces.split.length %>
              <% end %>
            </td>
            <td><%= game.round %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
        </div>
<% end %>

<% if @past_games.size > 0 %>
    <div class="panel panel-default">
        <table class="table table-striped">
          <thead>
              <th>
                Past games
              </th>
              <th>
                Your pieces
              </th>
              <th>
                Their pieces
              </th>
              <th>
                Round
              </th>
          </thead>

          <tbody>
          <% @past_games.each do |game| %>
              <tr class="danger">
                <td><div id="face-wrapper">
                  <% if current_user.email == game.user_email %>
                      <% current_opponent = User.find_by email: game.opponent_user_email %>
                  <% else %>
                      <% current_opponent = User.find_by email: game.user_email %>
                  <% end %>
                  <% if current_opponent.image %>
                      <img src='<%= current_opponent.image %>' class="img-circle face">
                  <% else %>
                      <img src='<%= image_url('default_profile.png')%>' class="img-circle face">
                  <% end %>
                  <%= current_opponent.email %>
                </div></td>
                <td><%= game.user_pieces.split.length %></td>
                <td><%= game.opponent_pieces.split.length %></td>
                <td><%= game.round %></td>
              </tr>
          <% end %>
          </tbody>
        </table>
    </div>
<% end %>


<div class="text-center">
  <%= button_to 'Submit a question', new_question_path, :class => 'btn btn-primary btn-lg', :method => :get, :style => 'width: 80%' %>
</div>
<% if current_user.role == 'Admin' || current_user.role == 'Reviewer' %>
    <div class="text-center">
      <%= button_to 'Review questions', show_review_path, :class => 'btn btn-primary btn-lg', :method => :get, :style => 'width: 80%' %>
    </div>
<% end %>