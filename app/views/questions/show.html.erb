<script>
  function disableAllButtons() {
      $("#correct").toggleClass("disabled");
      $("[id=incorrect]").toggleClass("disabled");
  }

  function revealBackButton() {
      $("#backButton").show();
  }

    $(document).ready(function() {
        $("[id=incorrect]").click(function() {
            $(this).toggleClass("btn-danger");
            $('#correct').toggleClass("btn-success");
            disableAllButtons();
            revealBackButton();
            $.post('/result',{result:false});
        });
    });
    $(document).ready(function() {
        $("#correct").click(function() {
            $(this).toggleClass("btn-success");
            disableAllButtons();
            revealBackButton();
            $.post('/result',{result:true});
        });
    });
    $(document).ready(function() {
        $("#backButton").hide();
    });
</script>

<div class="container round-edges">
  <div class="row">
    <div class="text-center">
      <h2><%= @question.question_text %></h2>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-6">Submitter: <%= @question.submitter %></div>
  <div class="col-xs-6 text-right">Category: <%= @question.category %></div>
</div>

<div class="text-center">
  <div class="center-block">
    <div class="btn-group-vertical btn-group-lg" style="margin: 9px 0; width: 80%">
      <% randNumber = 1 + rand(4); %>
      <% def displayCorrectAnswer %>
          <% if @question.is_authorized == false && (current_user.role == 'Admin' || current_user.role == 'Reviewer') %>
              <button type="button" class="btn btn-success" id="correct"><%= @question.correct_answer %></button>
          <% else %>
              <button type="button" class="btn btn-default" id="correct"><%= @question.correct_answer %></button>
          <% end %>
      <% end %>

      <% if randNumber == 1  %>
        <% displayCorrectAnswer %>
      <% end %>
      <button type="button" class="btn btn-default" id="incorrect"><%= @question.incorrect_answer_1 %></button>
      <% if randNumber == 2 %>
          <% displayCorrectAnswer %>
      <% end %>
      <button type="button" class="btn btn-default" id="incorrect"><%= @question.incorrect_answer_2 %></button>
      <% if randNumber == 3 %>
          <% displayCorrectAnswer %>
      <% end %>
      <button type="button" class="btn btn-default" id="incorrect"><%= @question.incorrect_answer_3 %></button>
      <% if randNumber == 4 %>
          <% displayCorrectAnswer %>
      <% end %>
    </div>
  </div>
</div>



<% if @question.is_authorized == false && (current_user.role == 'Admin' || current_user.role == 'Reviewer') %>
    <div class="text-center">
      <%= button_to 'Accept question', accept_review_path, :class => 'btn btn-primary btn-lg', params: { id: params[:id], is_accepted: true }, :method => :get, :style => 'width: 80%' %>
    </div>
    <div class="text-center">
      <%= button_to 'Decline question', accept_review_path, :class => 'btn btn-primary btn-lg', params: { id: params[:id], is_accepted: false }, :method => :get, :style => 'width: 80%' %>
    </div>
<% end %>

<div id="backButton" class="text-center">
  <%= button_to 'Back to game', assess_answer_path, :class => 'btn btn-info btn-lg btn-block', :method => :get %>
</div>